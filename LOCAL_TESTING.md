# دليل التشغيل المحلي للعبة Skyward Realms: Echo of Elements

هذا الدليل يشرح كيفية تشغيل لعبة Skyward Realms: Echo of Elements على جهازك المحلي لأغراض الاختبار والتطوير.

## المتطلبات المسبقة

تأكد من تثبيت البرامج التالية على جهازك:

1.  **Node.js و npm/pnpm**: يفضل استخدام `pnpm` لإدارة الحزم.
    -   يمكنك تثبيت `pnpm` باستخدام `npm`:
        ```bash
        npm install -g pnpm
        ```
2.  **متصفح ويب حديث**: مثل Google Chrome, Mozilla Firefox, Microsoft Edge, أو Safari.
    -   يجب أن يدعم المتصفح WebGL 2.0 للحصول على أفضل أداء للرسوميات ثلاثية الأبعاد.
3.  **Python 3**: يستخدم لتشغيل خادم ويب محلي بسيط لخدمة ملفات اللعبة بعد البناء.

## خطوات التشغيل

اتبع الخطوات التالية لتشغيل اللعبة محليًا:

### 1. استنساخ المستودع (إذا لم تكن قد فعلت ذلك بالفعل)

إذا لم تكن قد قمت باستنساخ المشروع من GitHub بعد، فافعل ذلك باستخدام الأمر التالي:

```bash
git clone <رابط_مستودع_GitHub_هنا>
cd skyward_realms
```

### 2. تثبيت التبعيات

انتقل إلى مجلد `game-client` داخل المشروع وقم بتثبيت جميع التبعيات المطلوبة:

```bash
cd game-client
pnpm install
```

### 3. تشغيل اللعبة في وضع التطوير (للتطوير والاختبار السريع)

هذه الطريقة مثالية للتطوير حيث توفر إعادة تحميل تلقائية وتصحيح الأخطاء.

1.  تأكد أنك داخل مجلد `game-client`.
2.  شغل الأمر التالي لبدء خادم التطوير:
    ```bash
    pnpm run dev
    ```
3.  سيقوم الخادم بالبدء وعادة ما يكون متاحًا على `http://localhost:5173` (أو منفذ آخر إذا كان 5173 مشغولاً). افتح هذا الرابط في متصفح الويب الخاص بك.

### 4. بناء اللعبة للإنتاج وتشغيلها محليًا (للاختبار النهائي)

هذه الطريقة تقوم ببناء نسخة محسّنة من اللعبة للاستخدام النهائي، ثم تشغلها باستخدام خادم ويب محلي بسيط.

1.  تأكد أنك داخل مجلد `game-client`.
2.  شغل الأمر التالي لبناء المشروع. سيتم إنشاء مجلد `dist` يحتوي على ملفات الإنتاج:
    ```bash
    pnpm run build
    ```
3.  بعد اكتمال البناء، انتقل إلى مجلد `dist`:
    ```bash
    cd dist
    ```
4.  شغل خادم ويب Python المحلي لخدمة الملفات. هذا ضروري لأن اللعبة تستخدم وحدات JavaScript (ES Modules) التي تتطلب خادم ويب للتشغيل الصحيح في المتصفح (بسبب سياسة نفس المصدر - Same-Origin Policy).
    ```bash
    python3 -m http.server 8000
    ```
5.  سيقوم الخادم بالبدء على المنفذ 8000. افتح متصفح الويب الخاص بك وانتقل إلى `http://localhost:8000`.

## استكشاف الأخطاء وإصلاحها

-   **مشاكل CORS / عدم تحميل الوحدات**: إذا واجهت أخطاء مثل `Access to script at 'file://...' from origin 'null' has been blocked by CORS policy`، فهذا يعني أنك تحاول فتح ملف `index.html` مباشرة من نظام الملفات. تأكد من تشغيل اللعبة عبر خادم ويب (باستخدام `pnpm run dev` أو `python3 -m http.server`).
-   **التبعيات المفقودة**: إذا واجهت أخطاء تتعلق بالوحدات المفقودة، تأكد من تشغيل `pnpm install` داخل مجلد `game-client`.
-   **مشاكل الأداء**: تأكد من أن متصفحك يدعم WebGL 2.0 وأن برامج تشغيل بطاقة الرسوميات لديك محدثة.

---

